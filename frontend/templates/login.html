{% extends "base.html" %}
{% block title %}Login â€” IT Ticket Engine{% endblock %}

{% block content %}
<div class="auth-wrapper">
    <div class="auth-card">

        <h2>ğŸ” Authentication</h2>
        <p class="subtitle">Log in or create a new account to continue</p>

        <!-- Role Toggle -->
        <div class="role-toggle">
            <input type="radio" id="role-user" name="global-role" value="User" checked />
            <label for="role-user">ğŸ‘¤ User</label>
            <input type="radio" id="role-admin" name="global-role" value="Admin" />
            <label for="role-admin">ğŸ›¡ï¸ Admin</label>
        </div>

        <!-- TABS -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="login-tab">ğŸ”‘ Login</button>
            <button class="tab-btn" data-tab="signup-tab">ğŸ“ Sign Up</button>
        </div>

        <!-- â”€â”€ LOGIN TAB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div id="login-tab" class="tab-pane active">
            <form method="POST" action="{{ url_for('login') }}" id="login-form">
                <input type="hidden" name="action" value="login" />
                <input type="hidden" name="role" id="login-role-val" value="User" />

                <div class="form-group">
                    <label class="form-label" for="email">Email address</label>
                    <input class="form-control" type="email" id="email" name="email" placeholder="you@company.com"
                        required autocomplete="email" />
                </div>

                <div class="form-group">
                    <label class="form-label" for="password">Password</label>
                    <input class="form-control" type="password" id="password" name="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                        required autocomplete="current-password" />
                </div>

                <button type="submit" class="btn btn-primary btn-full mt-2" id="login-btn">
                    ğŸ”‘ Login
                </button>
            </form>
        </div>

        <!-- â”€â”€ SIGN UP TAB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div id="signup-tab" class="tab-pane">
            <form method="POST" action="{{ url_for('login') }}" id="signup-form">
                <input type="hidden" name="action" value="signup" />
                <input type="hidden" name="role" id="signup-role-val" value="User" />

                <div class="form-group">
                    <label class="form-label" for="name">Full Name *</label>
                    <input class="form-control" type="text" id="name" name="name" placeholder="Jane Doe" required
                        autocomplete="name" />
                </div>

                <div class="form-group">
                    <label class="form-label" for="signup_email">Email *</label>
                    <input class="form-control" type="email" id="signup_email" name="signup_email"
                        placeholder="jane@company.com" required autocomplete="email" />
                </div>

                <div class="form-group">
                    <label class="form-label" for="department">Department</label>
                    <input class="form-control" type="text" id="department" name="department"
                        placeholder="IT / HR / Financeâ€¦" />
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="signup_password">Password *</label>
                        <input class="form-control" type="password" id="signup_password" name="signup_password"
                            placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required />
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="confirm_password">Confirm *</label>
                        <input class="form-control" type="password" id="confirm_password" name="confirm_password"
                            placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required />
                    </div>
                </div>

                <button type="submit" class="btn btn-primary btn-full mt-2">
                    ğŸ“ Create Account
                </button>
            </form>
        </div>

    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Sync role toggle â†’ hidden fields
    document.querySelectorAll('input[name="global-role"]').forEach(radio => {
        radio.addEventListener('change', () => {
            const val = radio.value;
            document.getElementById('login-role-val').value = val;
            document.getElementById('signup-role-val').value = val;
        });
    });
</script>
{% endblock %}